# NOOX æ–‡æ¡£å¯¼èˆª

## ğŸ“š æ–‡æ¡£åˆ—è¡¨

### ç”¨æˆ·æ–‡æ¡£
- **[USER_GUIDE.md](./USER_GUIDE.md)** - å®Œæ•´ç”¨æˆ·ä½¿ç”¨æŒ‡å—
- **[QUICKSTART_DUAL_FS.md](./QUICKSTART_DUAL_FS.md)** - åŒæ–‡ä»¶ç³»ç»Ÿå¿«é€Ÿå¼€å§‹

### å¼€å‘è€…æ–‡æ¡£
- **[TECHNICAL_SPECIFICATION.md](./TECHNICAL_SPECIFICATION.md)** - æŠ€æœ¯è§„æ ¼æ–‡æ¡£
- **[shell_ai_feature_guide.md](./shell_ai_feature_guide.md)** - Shell AI åŠŸèƒ½å¼€å‘æŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹

1. **é¦–æ¬¡ä½¿ç”¨**ï¼šé˜…è¯» [USER_GUIDE.md](./USER_GUIDE.md) çš„ç¬¬1-3ç« 
2. **å¼€å‘éƒ¨ç½²**ï¼šå‚è€ƒ [QUICKSTART_DUAL_FS.md](./QUICKSTART_DUAL_FS.md)
3. **é«˜çº§å¼€å‘**ï¼šæŸ¥çœ‹ [TECHNICAL_SPECIFICATION.md](./TECHNICAL_SPECIFICATION.md)

## ğŸ“ æ–‡æ¡£ç‰ˆæœ¬

- ç”¨æˆ·æŒ‡å—ç‰ˆæœ¬ï¼šv2.0
- æŠ€æœ¯è§„æ ¼ç‰ˆæœ¬ï¼šv3.0
- æœ€åæ›´æ–°ï¼š2025-10-13

## ğŸ’¡ å¸¸è§é—®é¢˜

### WiFi æ— æ³•è¿æ¥ï¼Ÿ
æŸ¥çœ‹ USER_GUIDE.md ç¬¬ 9.1 èŠ‚

### LLM API è°ƒç”¨å¤±è´¥ï¼Ÿ
æŸ¥çœ‹ USER_GUIDE.md ç¬¬ 9.2 èŠ‚

### å¦‚ä½•æ·»åŠ æ–°å·¥å…·ï¼Ÿ
æŸ¥çœ‹ TECHNICAL_SPECIFICATION.md ç¬¬ 13 èŠ‚

## ğŸ”— ç›¸å…³èµ„æº

- é¡¹ç›®ä»“åº“ï¼šhttps://github.com/your-repo/NOOX
- é—®é¢˜åé¦ˆï¼šhttps://github.com/your-repo/NOOX/issues


å¥½é—®é¢˜ï¼è¿™æ˜¯ä¸€ä¸ªå¸¸è§çš„è¯¯è§£ã€‚è®©æˆ‘è§£é‡Šä¸€ä¸‹ï¼š

[2 tools called]

å®Œç¾çš„é—®é¢˜ï¼è®©æˆ‘è§£é‡Šè¿™ä¸ªå…³é”®æ¦‚å¿µï¼š

## ğŸ”‘ æ ¸å¿ƒæ¦‚å¿µï¼š`board_build.filesystem` â‰  ä»£ç ä¸­å¯ç”¨çš„æ–‡ä»¶ç³»ç»Ÿ

### `board_build.filesystem` çš„ä½œç”¨

```ini
board_build.filesystem = ffat  # âš ï¸ åªå½±å“ uploadfs å‘½ä»¤ï¼
```

è¿™ä¸ªé…ç½®**åªå†³å®šä¸€ä»¶äº‹**ï¼š
- å½“ä½ è¿è¡Œ `pio run --target uploadfs` æ—¶
- PlatformIO ä¼šæŠŠ `data/` ç›®å½•çš„å†…å®¹ä¸Šä¼ åˆ°**å“ªä¸ªåˆ†åŒº**

```
board_build.filesystem = ffat
         â†“
pio run --target uploadfs
         â†“
ä¸Šä¼  data/ å†…å®¹ â†’ FFat åˆ†åŒº
```

### ä»£ç ä¸­çš„æ–‡ä»¶ç³»ç»ŸåŠ è½½

åœ¨ä»£ç ä¸­ï¼Œä½ å¯ä»¥**ç‹¬ç«‹æŒ‚è½½ä»»æ„æ–‡ä»¶ç³»ç»Ÿ**ï¼Œä¸ `platformio.ini` çš„è®¾ç½®æ— å…³ï¼š

```cpp
// src/main.cpp:80 - æ‰‹åŠ¨æŒ‚è½½ LittleFS
LittleFS.begin(true);  // âœ… æŒ‚è½½ littlefs åˆ†åŒº

// src/main.cpp:94 - æ‰‹åŠ¨æŒ‚è½½ FFat  
FFat.begin(true, "/ffat");  // âœ… æŒ‚è½½ ffat åˆ†åŒº
```

## ğŸ“Š ä¸‰è€…çš„å…³ç³»

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. åˆ†åŒºè¡¨ (partitions_16MB_app_large.csv)             â”‚
â”‚    å®šä¹‰ï¼šFlash ä¸­æœ‰å“ªäº›åˆ†åŒº                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  littlefs, data, spiffs, 0x810000, 0x3F0000  â† å®šä¹‰   â”‚
â”‚  ffat,     data, fat,    0xC00000, 0x400000  â† å®šä¹‰   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. platformio.ini                                      â”‚
â”‚    å†³å®šï¼šuploadfs ä¸Šä¼ åˆ°å“ªä¸ªåˆ†åŒº                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  board_build.filesystem = ffat  â† åªå½±å“ uploadfs     â”‚
â”‚                                                        â”‚
â”‚  æ‰§è¡Œ uploadfs æ—¶ï¼š                                    â”‚
â”‚  data/ ç›®å½• â†’ FFat åˆ†åŒº âœ…                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. ä»£ç  (main.cpp)                                     â”‚
â”‚    å†³å®šï¼šè¿è¡Œæ—¶æŒ‚è½½å“ªäº›æ–‡ä»¶ç³»ç»Ÿ                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  LittleFS.begin()  â†’ æŒ‚è½½ littlefs åˆ†åŒº âœ…             â”‚
â”‚  FFat.begin()      â†’ æŒ‚è½½ ffat åˆ†åŒº âœ…                 â”‚
â”‚                                                        â”‚
â”‚  å¯ä»¥åŒæ—¶æŒ‚è½½å¤šä¸ªï¼                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” è¯¦ç»†è§£é‡Š

### 1. åˆ†åŒºè¡¨å®šä¹‰äº†"å®¹å™¨"

```csv
# boards/partitions_16MB_app_large.csv
littlefs,   data, spiffs,  0x810000, 0x3F0000,  # 4MB ç©ºé—´
ffat,       data, fat,     0xC00000, 0x400000,  # 4MB ç©ºé—´
```

è¿™å‘Šè¯‰ ESP32ï¼š
- Flash çš„ `0x810000` å¼€å§‹çš„ 4MB æ˜¯ä¸€ä¸ªåˆ†åŒºï¼ˆç±»å‹ï¼šspiffsï¼Œç”¨äº LittleFSï¼‰
- Flash çš„ `0xC00000` å¼€å§‹çš„ 4MB æ˜¯å¦ä¸€ä¸ªåˆ†åŒºï¼ˆç±»å‹ï¼šfatï¼Œç”¨äº FFatï¼‰

### 2. `platformio.ini` æ§åˆ¶ä¸Šä¼ ç›®æ ‡

```ini
board_build.filesystem = ffat
```

**åªåœ¨è¿è¡Œ `uploadfs` æ—¶æœ‰æ•ˆ**ï¼š
```bash
pio run --target uploadfs
# â†‘ ä¼šè¯»å– data/ ç›®å½•
# â†“ ä¸Šä¼ åˆ° ffat åˆ†åŒºï¼ˆå› ä¸º board_build.filesystem = ffatï¼‰
```

**å¦‚æœä½ æ”¹ä¸º**ï¼š
```ini
board_build.filesystem = littlefs  # æ”¹æˆ littlefs
```

**ç„¶åè¿è¡Œ**ï¼š
```bash
pio run --target uploadfs
# â†‘ ä¼šè¯»å– data/ ç›®å½•  
# â†“ ä¸Šä¼ åˆ° littlefs åˆ†åŒºï¼ˆå› ä¸ºæ”¹æˆäº† littlefsï¼‰
```

### 3. ä»£ç ä¸­ç‹¬ç«‹æŒ‚è½½

```cpp
void setup() {
    // æŒ‚è½½ LittleFSï¼ˆè¯»å– littlefs åˆ†åŒºï¼‰
    LittleFS.begin(true);
    
    // æŒ‚è½½ FFatï¼ˆè¯»å– ffat åˆ†åŒºï¼‰
    FFat.begin(true, "/ffat");
    
    // ä¸¤è€…ç‹¬ç«‹å·¥ä½œï¼Œäº’ä¸å¹²æ‰°ï¼
}
```

**ESP32-Arduino å¦‚ä½•æ‰¾åˆ°åˆ†åŒºï¼Ÿ**

```cpp
LittleFS.begin()  // è‡ªåŠ¨æŸ¥æ‰¾åˆ†åŒºè¡¨ä¸­ subtype="spiffs" çš„åˆ†åŒº
FFat.begin()      // è‡ªåŠ¨æŸ¥æ‰¾åˆ†åŒºè¡¨ä¸­ subtype="fat" çš„åˆ†åŒº
```

## ğŸ’¡ å®é™…å·¥ä½œæµç¨‹

### å½“å‰é…ç½®ä¸‹çš„æ–‡ä»¶æµå‘

```
å¼€å‘é˜¶æ®µï¼š
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. å‡†å¤‡æ–‡ä»¶ï¼š
   data/noox-host-agent.exe  â† æ”¾åœ¨è¿™é‡Œ
   data/README.txt

2. è¿è¡Œ uploadfsï¼š
   $ pio run --target uploadfs
   
3. PlatformIO è¯»å–é…ç½®ï¼š
   board_build.filesystem = ffat  â† çœ‹åˆ°è¿™ä¸ª
   
4. ä¸Šä¼ åˆ° FFat åˆ†åŒºï¼š
   data/ å†…å®¹ â†’ Flash çš„ ffat åˆ†åŒº âœ…


è¿è¡Œé˜¶æ®µï¼š
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. è®¾å¤‡å¯åŠ¨ï¼Œæ‰§è¡Œ main.cppï¼š

2. æŒ‚è½½ LittleFSï¼š
   LittleFS.begin()
   â†’ è¯»å– Flash çš„ littlefs åˆ†åŒº âœ…
   â†’ æ‰¾åˆ°åµŒå…¥å¼éƒ¨ç½²çš„ Web æ–‡ä»¶

3. æŒ‚è½½ FFatï¼š
   FFat.begin()  
   â†’ è¯»å– Flash çš„ ffat åˆ†åŒº âœ…
   â†’ æ‰¾åˆ° uploadfs ä¸Šä¼ çš„ agent.exe

4. ä¸¤ä¸ªæ–‡ä»¶ç³»ç»Ÿéƒ½å¯ç”¨ï¼
   LittleFS ç”¨äºï¼šconfig.json, *.gz
   FFat ç”¨äºï¼šagent.exe (USBMSC å¯è§)
```

## ğŸ¯ ç±»æ¯”ç†è§£

æŠŠ Flash æƒ³è±¡æˆä¸€ä¸ªç¡¬ç›˜ï¼š

```
Flash (ç¡¬ç›˜)
â”œâ”€â”€ C:\ (littlefs åˆ†åŒº) â† LittleFS.begin() æŒ‚è½½
â”‚   â”œâ”€â”€ config.json
â”‚   â””â”€â”€ web/
â””â”€â”€ D:\ (ffat åˆ†åŒº)     â† FFat.begin() æŒ‚è½½
    â””â”€â”€ noox-host-agent.exe
```

- **åˆ†åŒºè¡¨** = ç¡¬ç›˜åˆ†åŒºï¼ˆå®šä¹‰ C:\ å’Œ D:\ çš„ä½ç½®å’Œå¤§å°ï¼‰
- **`board_build.filesystem`** = "åŒå‡» setup.exe æ—¶é»˜è®¤å®‰è£…åˆ° C:\ è¿˜æ˜¯ D:\"
- **ä»£ç ä¸­çš„ `begin()`** = "ç¨‹åºè¿è¡Œæ—¶æ‰“å¼€ C:\ å’Œ D:\"

## ğŸ“ æ€»ç»“

| é—®é¢˜ | ç­”æ¡ˆ |
|------|------|
| `board_build.filesystem = ffat` ä¼šé˜»æ­¢ LittleFS å·¥ä½œå—ï¼Ÿ | âŒ ä¸ä¼šï¼ä¸¤è€…ç‹¬ç«‹ |
| ä»£ç èƒ½åŒæ—¶ä½¿ç”¨ LittleFS å’Œ FFat å—ï¼Ÿ | âœ… å¯ä»¥ï¼åˆ†åˆ«è°ƒç”¨ `begin()` |
| å¦‚ä½•ä¸Šä¼ æ–‡ä»¶åˆ° LittleFSï¼Ÿ | æ”¹ `board_build.filesystem = littlefs` ç„¶å uploadfs |
| å¦‚ä½•ä¸Šä¼ æ–‡ä»¶åˆ° FFatï¼Ÿ | æ”¹ `board_build.filesystem = ffat` ç„¶å uploadfs |
| ä¸ºä»€ä¹ˆ Web æ–‡ä»¶ä¸ç”¨ uploadfsï¼Ÿ | å› ä¸ºç”¨äº† C æ•°ç»„åµŒå…¥ï¼Œè‡ªåŠ¨éƒ¨ç½² |

**å…³é”®ç‚¹**ï¼š`board_build.filesystem` åªå½±å“ `uploadfs` å‘½ä»¤çš„ç›®æ ‡ï¼Œä¸å½±å“ä»£ç ä¸­èƒ½ä½¿ç”¨å“ªäº›æ–‡ä»¶ç³»ç»Ÿï¼âœ¨